<style>
  /* General form styling */
  #resetPasswordForm {
    width: 300px; /* Adjust width as needed */
    margin: 0 auto; /* Center the form */
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f5f5f5;
  }

  /* Form heading */
  h1 {
    text-align: center;
    margin-bottom: 20px;
  }

  /* Label and input fields */
  label {
    display: block;
    margin-bottom: 5px;
  }

  input[type="password"] {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 3px;
    margin-bottom: 15px;
  }

  /* Button */
  button[type="submit"] {
    background-color: #4caf50; /* Green */
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 3px;
    cursor: pointer;
  }
</style>

<div>
  <h1>Reset Password</h1>

  <form id="resetPasswordForm" action="" method="">
    <input type="hidden" name="_method" value="PUT" />
    <input type="hidden" name="resetToken" value="<%= resetToken %>" />
    <div>
      <label for="newPassword">New Password:</label>
      <input type="password" id="newPassword" name="newPassword" required />
    </div>
    <button id="resetPasswordBtn">Reset Password</button>
  </form>
</div>

<script>
  const form = document.getElementById("resetPasswordBtn");

  form.addEventListener("click", (event) => {
    event.preventDefault();

    fetch("/api/users/reset-password", {
      method: "PUT",
      body: new FormData(form),
    })
      .then((response) => {
        if (response.status === 200) {
          // Display success message
          alert("Password reset successful! Closing window in 5 seconds...");

          // Close the window after 5 seconds
          setTimeout(() => {
            window.close();
          }, 5000);
        } else {
          throw new Error("Password reset not successful!");
        }
        return response.json();
      })
      .catch((error) => {
        // Handle error (e.g., display user-friendly error message)
      });
  });
</script>
